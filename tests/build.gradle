setupMultiplatform(project)

doIfAndroidEnabled {
    plugins.apply("kotlin-parcelize")
}

doIfIosEnabled { // FIXME: x
    plugins.apply("gradle-plugin")
}

kotlin {
    doIfAndroidEnabled {
        android {
            publishLibraryVariants("release", "debug")
        }
    }

    sourceSets {
        all {
            languageSettings {
                useExperimentalAnnotation('com.arkivanov.decompose.InternalDecomposeApi')
            }
        }

        doIfAndroidEnabled {
            androidMain {
                dependencies {
                    implementation "androidx.activity:activity-ktx:$androidx_activity_version"
                    implementation "androidx.lifecycle:lifecycle-common-java8:$androidx_lifecycle_common_java8_version"
                }
            }
        }

        doIfIosEnabled { // FIXME: x
            iosX64Main { // FIXME: x
                dependencies {
                    implementation "com.arkivanov.plugin:gradle-plugin-runtime:1.0"
                }
            }
        }
    }
}

group = "com.arkivanov.decompose"
version = decompose_version

setupMultiplatformPublications(project)
